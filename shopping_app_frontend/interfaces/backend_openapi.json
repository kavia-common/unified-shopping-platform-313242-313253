{"openapi":"3.1.0","info":{"title":"Shopping App Backend API","description":"Backend API for a fullstack shopping app: auth, products, cart, checkout, orders.","version":"1.0.0"},"paths":{"/":{"get":{"tags":["health"],"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/register":{"post":{"tags":["auth"],"summary":"Register a new user","description":"Creates a user account and returns a JWT access token.","operationId":"auth_register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Login","description":"Authenticates a user and returns a JWT access token.","operationId":"auth_login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products":{"get":{"tags":["products"],"summary":"List products","description":"Returns active products for browsing.","operationId":"products_list","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ProductResponse"},"type":"array","title":"Response Products List"}}}}}}},"/products/{product_id}":{"get":{"tags":["products"],"summary":"Get product detail","description":"Returns details for a single product.","operationId":"products_detail","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cart":{"get":{"tags":["cart"],"summary":"Get current cart","description":"Returns the authenticated user's active cart (created if missing).","operationId":"cart_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponse"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["cart"],"summary":"Clear cart","description":"Clears all items from the authenticated user's active cart.","operationId":"cart_clear","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/cart/items":{"post":{"tags":["cart"],"summary":"Add/update cart item","description":"Upserts a cart item for the authenticated user's active cart.","operationId":"cart_upsert_item","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartItemUpsertRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/cart/items/{cart_item_id}":{"delete":{"tags":["cart"],"summary":"Remove cart item","description":"Removes an item from the authenticated user's active cart.","operationId":"cart_remove_item","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cart_item_id","in":"path","required":true,"schema":{"type":"integer","title":"Cart Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/checkout":{"post":{"tags":["orders"],"summary":"Checkout","description":"Creates an order from the authenticated user's active cart and clears the cart.","operationId":"checkout_create_order","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/orders":{"get":{"tags":["orders"],"summary":"List orders","description":"Returns the authenticated user's orders (most recent first).","operationId":"orders_list","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrdersListResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/orders/{order_id}":{"get":{"tags":["orders"],"summary":"Order detail","description":"Returns a single order (with items) for the authenticated user.","operationId":"orders_detail","security":[{"HTTPBearer":[]}],"parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CartItemResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Cart item id."},"product":{"$ref":"#/components/schemas/ProductResponse","description":"Product snapshot."},"quantity":{"type":"integer","title":"Quantity","description":"Quantity."},"unit_price":{"type":"string","title":"Unit Price","description":"Unit price at time of adding to cart."}},"type":"object","required":["id","product","quantity","unit_price"],"title":"CartItemResponse"},"CartItemUpsertRequest":{"properties":{"product_id":{"type":"integer","title":"Product Id","description":"Product id to add/update in cart."},"quantity":{"type":"integer","exclusiveMinimum":0.0,"title":"Quantity","description":"Quantity (> 0)."}},"type":"object","required":["product_id","quantity"],"title":"CartItemUpsertRequest"},"CartResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Cart id."},"status":{"type":"string","title":"Status","description":"Cart status, usually 'active'."},"items":{"items":{"$ref":"#/components/schemas/CartItemResponse"},"type":"array","title":"Items","description":"Cart items."},"subtotal":{"type":"string","title":"Subtotal","description":"Subtotal across items."}},"type":"object","required":["id","status","subtotal"],"title":"CartResponse"},"CheckoutRequest":{"properties":{"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key","description":"Optional idempotency key."}},"type":"object","title":"CheckoutRequest","description":"For this app, checkout uses the active cart items.\nOptionally accept an idempotency key for frontend retries."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address."},"password":{"type":"string","title":"Password","description":"User password."}},"type":"object","required":["email","password"],"title":"LoginRequest"},"OrderItemResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Order item id."},"product":{"$ref":"#/components/schemas/ProductResponse","description":"Purchased product."},"quantity":{"type":"integer","title":"Quantity","description":"Quantity purchased."},"unit_price":{"type":"string","title":"Unit Price","description":"Unit price at purchase time."},"line_total":{"type":"string","title":"Line Total","description":"Line total (quantity * unit_price)."}},"type":"object","required":["id","product","quantity","unit_price","line_total"],"title":"OrderItemResponse"},"OrderResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Order id."},"status":{"type":"string","title":"Status","description":"Order status."},"total_amount":{"type":"string","title":"Total Amount","description":"Total order amount."},"currency":{"type":"string","title":"Currency","description":"Currency."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Created timestamp."},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Updated timestamp."},"items":{"items":{"$ref":"#/components/schemas/OrderItemResponse"},"type":"array","title":"Items","description":"Order items."}},"type":"object","required":["id","status","total_amount","currency","created_at","updated_at"],"title":"OrderResponse"},"OrdersListResponse":{"properties":{"orders":{"items":{"$ref":"#/components/schemas/OrderResponse"},"type":"array","title":"Orders","description":"List of orders."}},"type":"object","required":["orders"],"title":"OrdersListResponse"},"ProductResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Product id."},"name":{"type":"string","title":"Name","description":"Product name."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Product description."},"price":{"type":"string","title":"Price","description":"Unit price."},"currency":{"type":"string","title":"Currency","description":"Currency (ISO 4217)."},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url","description":"Optional product image URL."},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the product is active."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Created timestamp."},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Updated timestamp."}},"type":"object","required":["id","name","price","currency","is_active","created_at","updated_at"],"title":"ProductResponse"},"RegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address."},"password":{"type":"string","minLength":8,"title":"Password","description":"User password (min 8 chars)."},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name","description":"Optional user full name."}},"type":"object","required":["email","password"],"title":"RegisterRequest"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"JWT access token."},"token_type":{"type":"string","title":"Token Type","description":"Token type.","default":"bearer"}},"type":"object","required":["access_token"],"title":"TokenResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}},"tags":[{"name":"auth","description":"User registration and login (JWT)."},{"name":"products","description":"Browse products."},{"name":"cart","description":"Manage the authenticated user's cart."},{"name":"orders","description":"Checkout and view orders."}]}